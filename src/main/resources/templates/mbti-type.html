<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">MBTI ÌÉÄÏûÖ ÏÉÅÏÑ∏</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/mbti-type.css}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" th:content="${mbtiType} + ' ÏÑ±Í≤© Ïú†Ìòï ÏÉÅÏÑ∏ Î∂ÑÏÑù'">
    <meta property="og:description" th:content="${mbtiInfo?.description ?: 'MBTI ÏÑ±Í≤© Ïú†ÌòïÏóê ÎåÄÌï¥ ÏûêÏÑ∏Ìûà ÏïåÏïÑÎ≥¥ÏÑ∏Ïöî'}">
    <meta property="og:image" th:content="@{'/images/mbti-' + ${#strings.toLowerCase(mbtiType)} + '.jpg'}">
    <meta property="og:type" content="article">
</head>
<body>
    <div class="container">
        <!-- Ìó§Îçî -->
        <header class="header">
            <div class="header-content">
                <h1>
                    <span class="mbti-badge-header" th:text="${mbtiType}" th:data-mbti="${mbtiType}">ENFP</span>
                    ÏÉÅÏÑ∏ Î∂ÑÏÑù
                </h1>
                <nav class="main-nav">
                    <a th:href="@{/}" class="nav-link">
                        <i class="fas fa-home"></i> Î©îÏù∏
                    </a>
                    <a th:href="@{/test}" class="nav-link">
                        <i class="fas fa-clipboard-check"></i> ÌÖåÏä§Ìä∏
                    </a>
                    <a th:href="@{/comments}" class="nav-link">
                        <i class="fas fa-comments"></i> Ïª§ÎÆ§ÎãàÌã∞
                    </a>
                    <a th:href="@{/statistics}" class="nav-link">
                        <i class="fas fa-chart-line"></i> ÌÜµÍ≥Ñ
                    </a>
                </nav>
            </div>
        </header>

        <main class="mbti-main">
            <!-- ÌÉÄÏûÖ ÏÜåÍ∞ú ÏÑπÏÖò -->
            <section class="type-intro">
                <div class="intro-card">
                    <div class="intro-header">
                        <div class="mbti-badge-large" th:data-mbti="${mbtiType}">
                            <span class="mbti-text" th:text="${mbtiType}">ENFP</span>
                        </div>
                        <div class="intro-content">
                            <h2 th:text="${mbtiInfo?.name ?: 'Ïïå Ïàò ÏóÜÏùå'}">Ïû¨Í∏∞Î∞úÎûÑÌïú ÌôúÎèôÍ∞Ä</h2>
                            <p class="intro-description" th:text="${mbtiInfo?.description ?: 'ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.'}">
                                Ïó¥Ï†ïÏ†ÅÏù¥Í≥† Ï∞ΩÏùòÏ†ÅÏù∏ ÏÑ±Í≤©ÏúºÎ°ú Ìï≠ÏÉÅ ÏÉàÎ°úÏö¥ Í∞ÄÎä•ÏÑ±ÏùÑ Î≥¥Îäî ÏÇ¨Îûå
                            </p>
                        </div>
                    </div>
                    
                    <div class="type-stats">
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span class="stat-label">Ïù¥ ÌÉÄÏûÖ ÏÇ¨Ïö©Ïûê</span>
                            <span class="stat-value" th:text="${typeCount ?: 0} + 'Î™Ö'">0Î™Ö</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-percentage"></i>
                            <span class="stat-label">Ï†ÑÏ≤¥ Ï§ë ÎπÑÏú®</span>
                            <span class="stat-value" id="typePercentage">0%</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy"></i>
                            <span class="stat-label">Ïù∏Í∏∞ ÏàúÏúÑ</span>
                            <span class="stat-value" id="typeRanking">#1</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÏÑ±Í≤© ÌäπÏÑ± Î∂ÑÏÑù -->
            <section class="characteristics">
                <h3><i class="fas fa-brain"></i> ÏÑ±Í≤© ÌäπÏÑ± Î∂ÑÏÑù</h3>
                <div class="characteristics-grid">
                    <div class="characteristic-card strengths">
                        <div class="card-header">
                            <i class="fas fa-star"></i>
                            <h4>Ï£ºÏöî Ïû•Ï†ê</h4>
                        </div>
                        <div class="card-content">
                            <p th:text="${mbtiInfo?.strengths ?: 'Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§.'}">Ï∞ΩÏùòÏÑ±, Ïó¥Ï†ï, ÏÇ¨ÍµêÏÑ±, Ï†ÅÏùëÎ†•</p>
                            <ul class="strength-list" th:if="${mbtiInfo?.strengths}">
                                <li th:each="strength : ${#strings.listSplit(mbtiInfo.strengths, ',')}" th:text="${#strings.trim(strength)}">Ï∞ΩÏùòÏÑ±</li>
                            </ul>
                        </div>
                    </div>

                    <div class="characteristic-card weaknesses">
                        <div class="card-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h4>Ï£ºÏùòÌï† Ï†ê</h4>
                        </div>
                        <div class="card-content">
                            <p th:text="${mbtiInfo?.weaknesses ?: 'Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§.'}">ÏßëÏ§ëÎ†• Î∂ÄÏ°±, Ïä§Ìä∏Î†àÏä§ ÎØºÍ∞ê, ÏÑ∏Î∂ÄÏÇ¨Ìï≠ ÎÜìÏπ®</p>
                            <ul class="weakness-list" th:if="${mbtiInfo?.weaknesses}">
                                <li th:each="weakness : ${#strings.listSplit(mbtiInfo.weaknesses, ',')}" th:text="${#strings.trim(weakness)}">ÏßëÏ§ëÎ†• Î∂ÄÏ°±</li>
                            </ul>
                        </div>
                    </div>

                    <div class="characteristic-card careers">
                        <div class="card-header">
                            <i class="fas fa-briefcase"></i>
                            <h4>Ï∂îÏ≤ú ÏßÅÏóÖ</h4>
                        </div>
                        <div class="card-content" id="careerRecommendations">
                            <!-- JavaScriptÎ°ú ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßê -->
                        </div>
                    </div>

                    <div class="characteristic-card compatibility">
                        <div class="card-header">
                            <i class="fas fa-heart"></i>
                            <h4>Í∂ÅÌï© Î∂ÑÏÑù</h4>
                        </div>
                        <div class="card-content" id="compatibilityInfo">
                            <!-- JavaScriptÎ°ú ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßê -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ïú†Î™ÖÏù∏ Îß§Ïπ≠ -->
            <section class="celebrities">
                <h3><i class="fas fa-star"></i> Í∞ôÏùÄ ÌÉÄÏûÖÏùò Ïú†Î™ÖÏù∏</h3>
                <div class="celebrities-grid" id="celebritiesGrid">
                    <!-- JavaScriptÎ°ú ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßê -->
                </div>
            </section>

            <!-- ÏµúÍ∑º ÌÖåÏä§Ìä∏ Í≤∞Í≥ºÎì§ -->
            <section class="recent-results" th:if="${recentResults != null and !#lists.isEmpty(recentResults)}">
                <div class="section-header">
                    <h3><i class="fas fa-clock"></i> ÏµúÍ∑º ÌÖåÏä§Ìä∏ Í≤∞Í≥ºÎì§</h3>
                    <span class="results-count" th:text="'Ï¥ù ' + ${typeCount} + 'Î™ÖÏù¥ Ïù¥ ÌÉÄÏûÖÏùÑ Î∞õÏïòÏñ¥Ïöî'">Ï¥ù 0Î™ÖÏù¥ Ïù¥ ÌÉÄÏûÖÏùÑ Î∞õÏïòÏñ¥Ïöî</span>
                </div>
                
                <div class="results-timeline">
                    <div th:each="result : ${recentResults}" class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                            <div class="result-summary">
                                <span class="result-id">#{[[${result.resultId}]]}</span>
                                <time th:text="${#temporals.format(result.createdAt, 'MMÏõî ddÏùº HH:mm')}">12Ïõî 25Ïùº 14:30</time>
                            </div>
                            <div class="result-preview" th:if="${result.aiAnalysis}">
                                <p th:text="${#strings.length(result.aiAnalysis) > 100 ? #strings.substring(result.aiAnalysis, 0, 100) + '...' : result.aiAnalysis}">
                                    AI Î∂ÑÏÑù Í≤∞Í≥º ÎØ∏Î¶¨Î≥¥Í∏∞...
                                </p>
                            </div>
                            <a th:href="@{'/result/' + ${result.resultId}}" class="view-result-btn">
                                Í≤∞Í≥º Î≥¥Í∏∞ <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ïª§ÎÆ§ÎãàÌã∞ ÎåìÍ∏ÄÎì§ -->
            <section class="type-community" th:if="${typeComments != null and !#lists.isEmpty(typeComments)}">
                <div class="section-header">
                    <h3>
                        <i class="fas fa-comments"></i> 
                        <span th:text="${mbtiType}">ENFP</span> Ïª§ÎÆ§ÎãàÌã∞
                    </h3>
                    <a th:href="@{/comments(mbti=${mbtiType})}" class="view-all-btn">
                        Ï†ÑÏ≤¥ ÎåìÍ∏Ä Î≥¥Í∏∞ <i class="fas fa-arrow-right"></i>
                    </a>
                </div>

                <div class="community-preview">
                    <div th:each="comment : ${typeComments}" class="comment-preview">
                        <div class="comment-header">
                            <span class="nickname" th:text="${comment.nickname ?: 'ÏùµÎ™Ö'}">ÏùµÎ™Ö</span>
                            <time th:text="${#temporals.format(comment.createdAt, 'MM-dd HH:mm')}">12-25 14:30</time>
                        </div>
                        <div class="comment-content">
                            <p th:text="${#strings.length(comment.commentText) > 150 ? #strings.substring(comment.commentText, 0, 150) + '...' : comment.commentText}">
                                ÎåìÍ∏Ä ÎÇ¥Ïö©...
                            </p>
                        </div>
                        <div class="comment-actions">
                            <span class="likes">
                                <i class="fas fa-heart"></i>
                                <span th:text="${comment.likesCount}">0</span>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="join-community">
                    <h4>üí¨ Í∞ôÏùÄ ÌÉÄÏûÖÏùò ÏÇ¨ÎûåÎì§Í≥º ÏÜåÌÜµÌï¥Î≥¥ÏÑ∏Ïöî!</h4>
                    <p>ÎπÑÏä∑Ìïú ÏÑ±Í≤©Ïùò ÏÇ¨ÎûåÎì§Í≥º Í≤ΩÌóòÏùÑ ÎÇòÎàÑÍ≥† ÏÑúÎ°úÏùò Ïù¥ÏïºÍ∏∞Î•º Îì§Ïñ¥Î≥¥ÏÑ∏Ïöî.</p>
                    <a th:href="@{/comments(mbti=${mbtiType})}" class="join-btn">
                        <i class="fas fa-users"></i> Ïª§ÎÆ§ÎãàÌã∞ Ï∞∏Ïó¨ÌïòÍ∏∞
                    </a>
                </div>
            </section>

            <!-- Îã§Î•∏ MBTI ÌÉÄÏûÖÎì§Í≥º ÎπÑÍµê -->
            <section class="type-comparison">
                <h3><i class="fas fa-balance-scale"></i> Îã§Î•∏ MBTI ÌÉÄÏûÖÍ≥º ÎπÑÍµê</h3>
                <div class="comparison-grid">
                    <div class="comparison-header">
                        <h4>ÏÑ±Í≤© Ïú†ÌòïÎ≥Ñ Î∂ÑÌè¨</h4>
                        <p>Ï†ÑÏ≤¥ ÏÇ¨Ïö©Ïûê Ï§ëÏóêÏÑú Í∞Å ÌÉÄÏûÖÏù¥ Ï∞®ÏßÄÌïòÎäî ÎπÑÏú®ÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî.</p>
                    </div>
                    
                    <div class="mbti-distribution" id="mbtiDistribution">
                        <!-- JavaScriptÎ°ú ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßê -->
                    </div>
                </div>
            </section>

            <!-- Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
            <section class="action-section">
                <div class="action-buttons">
                    <a th:href="@{/test}" class="action-btn primary">
                        <i class="fas fa-clipboard-check"></i> ÌÖåÏä§Ìä∏ ÏãúÏûëÌïòÍ∏∞
                    </a>
                    <a th:href="@{/comments(mbti=${mbtiType})}" class="action-btn secondary">
                        <i class="fas fa-comments"></i> Ïª§ÎÆ§ÎãàÌã∞ Ï∞∏Ïó¨
                    </a>
                    <button class="action-btn secondary" onclick="shareThisType()">
                        <i class="fas fa-share-alt"></i> Ïù¥ ÌÉÄÏûÖ Í≥µÏú†ÌïòÍ∏∞
                    </button>
                    <a th:href="@{/statistics}" class="action-btn secondary">
                        <i class="fas fa-chart-line"></i> Ï†ÑÏ≤¥ ÌÜµÍ≥Ñ Î≥¥Í∏∞
                    </a>
                </div>
            </section>

            <!-- Îã§Î•∏ MBTI ÌÉÄÏûÖ ÌÉêÏÉâ -->
            <section class="explore-types">
                <h3><i class="fas fa-compass"></i> Îã§Î•∏ MBTI ÌÉÄÏûÖ ÌÉêÏÉâÌïòÍ∏∞</h3>
                <div class="types-grid">
                    <!-- ENFP -->
                    <div class="type-card" th:classappend="${'ENFP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ENFP}" th:unless="${'ENFP' == mbtiType}">
                            <span class="type-badge" data-mbti="ENFP">ENFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENFP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ENFP' == mbtiType}">
                            <span class="type-badge current" data-mbti="ENFP">ENFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENFP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ENFJ -->
                    <div class="type-card" th:classappend="${'ENFJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ENFJ}" th:unless="${'ENFJ' == mbtiType}">
                            <span class="type-badge" data-mbti="ENFJ">ENFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENFJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ENFJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="ENFJ">ENFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENFJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ENTP -->
                    <div class="type-card" th:classappend="${'ENTP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ENTP}" th:unless="${'ENTP' == mbtiType}">
                            <span class="type-badge" data-mbti="ENTP">ENTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENTP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ENTP' == mbtiType}">
                            <span class="type-badge current" data-mbti="ENTP">ENTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENTP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ENTJ -->
                    <div class="type-card" th:classappend="${'ENTJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ENTJ}" th:unless="${'ENTJ' == mbtiType}">
                            <span class="type-badge" data-mbti="ENTJ">ENTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENTJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ENTJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="ENTJ">ENTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ENTJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ESFP -->
                    <div class="type-card" th:classappend="${'ESFP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ESFP}" th:unless="${'ESFP' == mbtiType}">
                            <span class="type-badge" data-mbti="ESFP">ESFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESFP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ESFP' == mbtiType}">
                            <span class="type-badge current" data-mbti="ESFP">ESFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESFP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ESFJ -->
                    <div class="type-card" th:classappend="${'ESFJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ESFJ}" th:unless="${'ESFJ' == mbtiType}">
                            <span class="type-badge" data-mbti="ESFJ">ESFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESFJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ESFJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="ESFJ">ESFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESFJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ESTP -->
                    <div class="type-card" th:classappend="${'ESTP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ESTP}" th:unless="${'ESTP' == mbtiType}">
                            <span class="type-badge" data-mbti="ESTP">ESTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESTP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ESTP' == mbtiType}">
                            <span class="type-badge current" data-mbti="ESTP">ESTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESTP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ESTJ -->
                    <div class="type-card" th:classappend="${'ESTJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ESTJ}" th:unless="${'ESTJ' == mbtiType}">
                            <span class="type-badge" data-mbti="ESTJ">ESTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESTJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ESTJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="ESTJ">ESTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ESTJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- INFP -->
                    <div class="type-card" th:classappend="${'INFP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/INFP}" th:unless="${'INFP' == mbtiType}">
                            <span class="type-badge" data-mbti="INFP">INFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('INFP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'INFP' == mbtiType}">
                            <span class="type-badge current" data-mbti="INFP">INFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('INFP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- INFJ -->
                    <div class="type-card" th:classappend="${'INFJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/INFJ}" th:unless="${'INFJ' == mbtiType}">
                            <span class="type-badge" data-mbti="INFJ">INFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('INFJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'INFJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="INFJ">INFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('INFJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- INTP -->
                    <div class="type-card" th:classappend="${'INTP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/INTP}" th:unless="${'INTP' == mbtiType}">
                            <span class="type-badge" data-mbti="INTP">INTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('INTP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'INTP' == mbtiType}">
                            <span class="type-badge current" data-mbti="INTP">INTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('INTP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- INTJ -->
                    <div class="type-card" th:classappend="${'INTJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/INTJ}" th:unless="${'INTJ' == mbtiType}">
                            <span class="type-badge" data-mbti="INTJ">INTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('INTJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'INTJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="INTJ">INTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('INTJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ISFP -->
                    <div class="type-card" th:classappend="${'ISFP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ISFP}" th:unless="${'ISFP' == mbtiType}">
                            <span class="type-badge" data-mbti="ISFP">ISFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISFP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ISFP' == mbtiType}">
                            <span class="type-badge current" data-mbti="ISFP">ISFP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISFP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ISFJ -->
                    <div class="type-card" th:classappend="${'ISFJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ISFJ}" th:unless="${'ISFJ' == mbtiType}">
                            <span class="type-badge" data-mbti="ISFJ">ISFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISFJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ISFJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="ISFJ">ISFJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISFJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ISTP -->
                    <div class="type-card" th:classappend="${'ISTP' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ISTP}" th:unless="${'ISTP' == mbtiType}">
                            <span class="type-badge" data-mbti="ISTP">ISTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISTP') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ISTP' == mbtiType}">
                            <span class="type-badge current" data-mbti="ISTP">ISTP</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISTP') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                    
                    <!-- ISTJ -->
                    <div class="type-card" th:classappend="${'ISTJ' == mbtiType ? 'current' : ''}">
                        <a th:href="@{/mbti/ISTJ}" th:unless="${'ISTJ' == mbtiType}">
                            <span class="type-badge" data-mbti="ISTJ">ISTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISTJ') ?: 0}">0</span>
                        </a>
                        <div th:if="${'ISTJ' == mbtiType}">
                            <span class="type-badge current" data-mbti="ISTJ">ISTJ</span>
                            <span class="type-count" th:text="${mbtiStats.get('ISTJ') ?: 0}">0</span>
                            <span class="current-label">ÌòÑÏû¨</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Ìë∏ÌÑ∞ -->
        <footer class="footer">
            <p>&copy; 2024 MBTI ÌÖåÏä§Ìä∏. <span th:text="${mbtiType}">ENFP</span> ÌÉÄÏûÖÏóê ÎåÄÌï¥ Îçî ÏïåÏïÑÍ∞ÄÏÑ∏Ïöî! üåà</p>
        </footer>
    </div>

    <!-- ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="toastMessage">Î©îÏãúÏßÄ</span>
        </div>
    </div>

    <script th:src="@{/js/mbti-type.js}"></script>
    <script th:inline="javascript">
        // Ï†ÑÏó≠ Î≥ÄÏàò ÏÑ§Ï†ï
        window.mbtiTypeData = {
            mbtiType: /*[[${mbtiType}]]*/ null,
            mbtiInfo: /*[[${mbtiInfo}]]*/ {},
            typeCount: /*[[${typeCount}]]*/ 0,
            mbtiStats: /*[[${mbtiStats}]]*/ {}
        };
        
        // ÌÖåÏä§Ìä∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô Ìï®Ïàò
        function goToTest() {
            window.location.href = '/test';
        }
        
        // ÌÉÄÏûÖ Í≥µÏú† Ìï®Ïàò
        function shareThisType() {
            const shareUrl = window.location.href;
            const shareTitle = `${window.mbtiTypeData.mbtiType} ÏÑ±Í≤© Ïú†Ìòï ÏÉÅÏÑ∏ Î∂ÑÏÑù`;
            const shareText = `ÎÇòÎäî ${window.mbtiTypeData.mbtiType} ÏÑ±Í≤© Ïú†ÌòïÏù¥ÏóêÏöî! ÎãπÏã†Ïùò MBTIÎäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?`;
            
            if (navigator.share) {
                navigator.share({
                    title: shareTitle,
                    text: shareText,
                    url: shareUrl
                }).catch(console.error);
            } else {
                // ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨
                copyToClipboard(`${shareText}\n${shareUrl}`).then(() => {
                    showToast('Í≥µÏú† ÎÇ¥Ïö©Ïù¥ ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!');
                }).catch(() => {
                    showToast('Í≥µÏú†Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
                });
            }
        }
        
        // ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨ Ìï®Ïàò
        async function copyToClipboard(text) {
            if (navigator.clipboard) {
                await navigator.clipboard.writeText(text);
            } else {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                } finally {
                    document.body.removeChild(textArea);
                }
            }
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            initializeMbtiTypePage();
            loadCareerRecommendations();
            loadCompatibilityInfo();
            loadCelebrities();
            loadMbtiDistribution();
            calculateTypeRanking();
        });
    </script>
</body>
</html>
